:root {
    /* --- COLORES GENERALES & P3P (Base) --- */
    --bg-dark: #050505;
    --bg-panel: #0a0f14;
    --kirijo-blue: #00d2ff; 
    --kirijo-dim: #005f73;
    
    /* --- P3 RELOAD (Cyan & Ocean) --- */
    --p3r-cyan: #4ffbfc;       /* Cian eléctrico */
    --p3r-ocean: #002e3b;      /* Azul profundo */
    --p3r-glass: rgba(0, 46, 59, 0.85);
    
    /* --- P5 ROYAL (Red, Black & Gold) --- */
    --p5r-red: #d30000;        /* Rojo Sangre */
    --p5r-bright-red: #ff0000; /* Rojo Neón */
    --p5r-black: #000000;
    --p5r-gold: #fcc200;       /* Dorado Tesoro */
    
    /* --- OTROS --- */
    --alert-red: #ff2a2a;
    --text-main: #e0f7ff;
    --text-dim: #6d8a96;
    --font-tech: 'Exo 2', sans-serif;
}

body {
    background-color: var(--bg-dark);
    color: var(--text-main);
    font-family: var(--font-tech);
    margin: 0;
    overflow: hidden;
    height: 100vh;
    transition: background 0.5s ease, color 0.3s ease;
}

/* =========================================
   FONDO GRID (BASE)
   ========================================= */
.bg-grid {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background-image: 
        linear-gradient(rgba(0, 210, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 210, 255, 0.03) 1px, transparent 1px);
    background-size: 30px 30px;
    z-index: -1;
    transition: all 0.5s ease;
}

/* =========================================
   VISTAS & PANTALLA DE CARGA
   ========================================= */
.view {
    position: absolute;
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
    opacity: 0; pointer-events: none;
    transition: opacity 0.4s ease-in-out;
}
.view.active { opacity: 1; pointer-events: all; }

#view-boot { justify-content: center; align-items: center; text-align: center; }

.glitch {
    font-size: 3rem; font-weight: 700; color: var(--kirijo-blue);
    text-shadow: 0 0 10px var(--kirijo-blue);
    letter-spacing: 4px; margin-bottom: 0;
}
.subtitle { color: var(--text-dim); letter-spacing: 2px; margin-top: 5px; font-size: 0.9rem; }
.boot-log { font-family: monospace; color: var(--text-dim); margin: 30px 0; min-height: 80px; line-height: 1.5; }

/* =========================================
   BOTONES GLOBALES
   ========================================= */
.btn-cyber {
    background: transparent;
    border: 1px solid var(--kirijo-blue);
    color: var(--kirijo-blue);
    padding: 15px 40px;
    font-family: var(--font-tech);
    font-weight: 700;
    letter-spacing: 2px;
    cursor: pointer;
    transition: 0.3s;
    box-shadow: 0 0 10px rgba(0, 210, 255, 0.2);
    text-transform: uppercase;
}
.btn-cyber:hover {
    background: var(--kirijo-blue); color: var(--bg-dark);
    box-shadow: 0 0 20px var(--kirijo-blue);
}
.btn-cyber.red {
    border-color: var(--alert-red); color: var(--alert-red);
    box-shadow: 0 0 10px rgba(255, 42, 42, 0.2);
}
.btn-cyber.red:hover {
    background: var(--alert-red); color: #fff;
    box-shadow: 0 0 25px var(--alert-red);
}

/* =========================================
   DASHBOARD (MENU PRINCIPAL)
   ========================================= */
.os-header {
    display: flex; justify-content: space-between; padding: 20px;
    border-bottom: 1px solid var(--kirijo-dim);
    background: rgba(0,0,0,0.8); align-items: center;
}
.status-dot {
    height: 10px; width: 10px; background-color: var(--kirijo-blue);
    border-radius: 50%; display: inline-block; margin-right: 8px;
    box-shadow: 0 0 5px var(--kirijo-blue);
}
.user-info { font-weight: bold; letter-spacing: 1px; }

.content-container { padding: 20px; overflow-y: auto; }
.content-container h2 {
    color: var(--text-dim); border-bottom: 1px solid #333;
    padding-bottom: 10px; font-size: 1rem; margin-bottom: 20px;
}

/* --- TARJETAS DE SELECCIÓN DE JUEGO --- */
.game-card {
    margin-bottom: 20px; padding: 25px;
    background: linear-gradient(135deg, var(--bg-panel) 0%, #001e2b 100%);
    border-left: 4px solid var(--kirijo-blue);
    display: flex; justify-content: space-between; align-items: center;
    cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
    border-radius: 0 10px 10px 0;
}
.game-card:hover { transform: translateX(10px); }
.game-card h3 { margin: 0 0 5px 0; color: var(--text-main); }
.game-card p { margin: 0; color: var(--text-dim); font-size: 0.9rem; }
.card-icon { font-size: 2rem; }

.game-card.disabled {
    opacity: 0.5; filter: grayscale(1); cursor: not-allowed; border-left-color: #555;
}

/* ESTILOS ESPECÍFICOS DE TARJETAS (GLOW) */

/* P3P (Clásico) */
.p3p-glow:hover { box-shadow: 0 0 15px rgba(0, 210, 255, 0.2); border-color: var(--kirijo-blue); }

/* P3R (Reload - Cian) */
.p3r-glow {
    background: linear-gradient(135deg, #051821 0%, #003847 100%);
    border-left-color: var(--p3r-cyan) !important;
}
.p3r-glow:hover { 
    box-shadow: 0 0 25px rgba(79, 251, 252, 0.4); 
    border-color: #fff !important;
    background: linear-gradient(135deg, #092b3b 0%, #005f73 100%);
}
.p3r-glow h3 { color: var(--p3r-cyan) !important; text-shadow: 0 0 5px rgba(79, 251, 252, 0.3); }

/* P4G (Golden - Amarillo) */
.p4g-glow { border-left-color: #ffe600 !important; }
.p4g-glow:hover {
    box-shadow: 0 0 20px rgba(255, 230, 0, 0.3);
    border-color: #ffe600;
}

/* P5R (Royal - Rojo) */
.p5r-glow {
    background: linear-gradient(135deg, #200000 0%, #300000 100%);
    border-left-color: var(--p5r-red) !important;
    transform: skew(-2deg); /* Inclinación sutil */
}
.p5r-glow:hover {
    box-shadow: 0 0 25px rgba(255, 0, 0, 0.4);
    border-color: var(--p5r-bright-red) !important;
    background: linear-gradient(135deg, #400000 0%, #600000 100%);
    transform: translateX(10px) skew(-2deg);
}
.p5r-glow h3 { font-family: 'Impact', sans-serif; letter-spacing: 1px; }


/* =========================================
   INTERFAZ INTERNA (JUEGO ACTIVO)
   ========================================= */
.game-top-bar {
    display: flex; align-items: center; justify-content: space-between;
    padding: 15px 20px; background: var(--bg-panel);
    border-bottom: 2px solid var(--alert-red);
    transition: all 0.3s ease;
}
.btn-back {
    background: none; border: none; color: var(--text-dim);
    cursor: pointer; font-family: var(--font-tech); font-weight: bold;
}
.btn-back:hover { color: var(--text-main); }

.gender-switch { display: flex; gap: 0; border: 1px solid var(--text-dim); border-radius: 4px; overflow: hidden;}
.switch-btn {
    background: transparent; border: none;
    color: var(--text-dim); padding: 8px 12px; cursor: pointer;
    font-size: 0.8rem;
}
.switch-btn.active {
    background: var(--kirijo-blue); color: var(--bg-dark); font-weight: bold;
}

/* NAVEGACIÓN DE MÓDULOS */
.modules-nav {
    display: flex; overflow-x: auto; padding: 15px; gap: 10px;
    background: rgba(0,0,0,0.3); border-bottom: 1px solid #222;
    transition: all 0.3s ease;
}
.modules-nav button {
    flex: 1; min-width: 100px; padding: 12px;
    background: var(--bg-panel); border: 1px solid var(--kirijo-dim);
    color: var(--text-main); cursor: pointer; border-radius: 4px;
    transition: 0.2s;
}
.modules-nav button:hover { background: rgba(0, 210, 255, 0.1); }
.modules-nav button.active-mod {
    background: var(--kirijo-blue); color: var(--bg-dark); font-weight: bold;
}
.modules-nav button.alert-text { color: var(--alert-red); border-color: var(--alert-red); }
.modules-nav button.alert-text.active-mod {
    background-color: var(--alert-red) !important;
    border-color: var(--alert-red) !important;
    color: #fff !important;
    box-shadow: 0 0 15px var(--alert-red);
}

/* VISOR DE DATOS */
.data-viewport { flex: 1; overflow-y: auto; padding: 20px; scroll-behavior: smooth; }
.empty-state { text-align: center; color: var(--text-dim); margin-top: 50px; }

.data-card {
    background: rgba(10, 15, 20, 0.95);
    border: 1px solid var(--kirijo-dim);
    padding: 15px; margin-bottom: 15px;
    border-radius: 4px; box-shadow: 0 4px 6px rgba(0,0,0,0.3);
}
.data-title { 
    color: var(--kirijo-blue); font-weight: bold; font-size: 1.1rem; 
    margin-bottom: 8px; border-bottom: 1px solid #333; padding-bottom: 5px; 
}
.data-highlight { color: var(--alert-red); font-weight: bold; margin-top: 5px; }

/* SOCIAL LINKS & DETALLES */
.social-card { padding: 20px; }
.arcana-header {
    display: flex; align-items: center;
    border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px;
}
.arcana-img {
    width: 45px; height: auto; margin-right: 15px;
    border-radius: 4px; border: 1px solid var(--kirijo-dim);
    box-shadow: 0 0 10px rgba(0, 210, 255, 0.2);
}
.data-title.no-border { border-bottom: none; padding-bottom: 0; margin-bottom: 0; font-size: 1.2rem; }
.social-info-container { display: flex; justify-content: space-between; align-items: flex-start; gap: 20px; }
.social-details { flex: 1; }
.character-img {
    width: 100px; height: 100px; object-fit: cover;
    border-radius: 12px; border: 3px solid var(--kirijo-blue);
    box-shadow: 0 0 15px var(--kirijo-blue); opacity: 0.9; flex-shrink: 0;
}
strong { color: #fff; }
details { margin-top: 10px; }
summary { outline: none; cursor: pointer; }


/* ==========================================================================
   ESTILOS SOCIAL LINKS (NUEVO SISTEMA DE CLASES)
   ========================================================================== */

/* --- BASE (P3P / P3R / P4G) --- */
.social-rank-box {
    margin-bottom: 12px;
    background: rgba(255, 255, 255, 0.05); /* Fondo sutil */
    padding: 10px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.rank-header {
    margin-bottom: 8px;
    color: var(--kirijo-blue);
    font-weight: bold;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 4px;
}

.response-item {
    margin-top: 6px;
    padding-left: 10px;
    border-left: 2px solid var(--text-dim);
    font-size: 0.95em;
    margin-bottom: 8px;
}

.response-item .context { color: #aaa; font-style: italic; margin-bottom: 2px; }
.response-item .choice { color: #fff; }


/* ######################################################################
   TEMA: PERSONA 3 RELOAD (Ocean Blue / Cyan / Glass)
   ###################################################################### */
body.theme-p3r {
    --bg-dark: #001a2c;
    --kirijo-blue: var(--p3r-cyan);
    --kirijo-dim: #004d55;
    background: radial-gradient(circle at center, #003847 0%, #00121f 100%);
}

body.theme-p3r .bg-grid {
    background-image: radial-gradient(var(--p3r-cyan) 1px, transparent 1px);
    background-size: 40px 40px; opacity: 0.3;
}

/* Header Glassmorphism */
body.theme-p3r .game-top-bar {
    background: rgba(0, 30, 40, 0.6); backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 5px 20px rgba(0, 210, 255, 0.1);
}
body.theme-p3r .current-module-title {
    color: #fff; text-shadow: 0 0 10px var(--p3r-cyan); letter-spacing: 3px;
}

/* Botones "Clean" */
body.theme-p3r .modules-nav { background: rgba(0,0,0,0.2); border-bottom: none; }
body.theme-p3r .modules-nav button {
    background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(79, 251, 252, 0.3);
    color: #fff; border-radius: 20px;
}
body.theme-p3r .modules-nav button:hover {
    background: rgba(79, 251, 252, 0.2); border-color: var(--p3r-cyan);
    box-shadow: 0 0 15px rgba(79, 251, 252, 0.3);
}
body.theme-p3r .modules-nav button.active-mod {
    background: #fff; color: #002e3b; font-weight: 800;
    box-shadow: 0 0 20px var(--p3r-cyan); border: none;
}

/* Data Cards Glass */
body.theme-p3r .data-card {
    background: linear-gradient(135deg, rgba(10, 30, 40, 0.9) 0%, rgba(0, 20, 30, 0.8) 100%);
    border: 1px solid rgba(79, 251, 252, 0.3); border-left: 4px solid var(--p3r-cyan);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37); border-radius: 8px;
}
body.theme-p3r .data-title {
    color: var(--p3r-cyan) !important; border-bottom: 1px solid rgba(79, 251, 252, 0.2);
    text-shadow: 0 0 8px rgba(79, 251, 252, 0.4);
}
body.theme-p3r .social-card .character-img {
    border-color: #fff; box-shadow: 0 0 20px rgba(79, 251, 252, 0.5); border-radius: 50%;
}


/* ######################################################################
   TEMA: PERSONA 4 GOLDEN (Yellow / Pop / Retro)
   ###################################################################### */
body.theme-p4 {
    --bg-dark: #ffe600; --bg-panel: #fff; 
    --text-main: #000; --text-dim: #333; 
    --kirijo-blue: #e60012; --kirijo-dim: #000; --alert-red: #d32f2f;
}

body.theme-p4 .bg-grid {
    background-image: 
        linear-gradient(#f5d500 2px, transparent 2px),
        linear-gradient(90deg, #f5d500 2px, transparent 2px);
    background-size: 20px 20px; background-color: #ffe600;
}

body.theme-p4 .game-top-bar {
    background: #000; color: #ffe600; border-bottom: 4px solid #fff;
}
body.theme-p4 .game-top-bar span, body.theme-p4 .btn-back { color: #ffe600 !important; }

body.theme-p4 .modules-nav { background: rgba(255,255,255,0.5); border-bottom: 2px solid #000; }
body.theme-p4 .modules-nav button {
    border: 2px solid #000; color: #000; font-weight: bold;
    transform: skew(-10deg); margin: 0 5px; background: #fff; border-radius: 0;
}
/* Colores específicos de botones P4 */
body.theme-p4 .p4-btn-1 { border-color: #69db00; color: #4fa300; }
body.theme-p4 .p4-btn-1:hover, body.theme-p4 .p4-btn-1.active-mod { background: #69db00; color: #fff; }

body.theme-p4 .p4-btn-2 { border-color: #ff3399; color: #d6006e; }
body.theme-p4 .p4-btn-2:hover, body.theme-p4 .p4-btn-2.active-mod { background: #ff3399; color: #fff; }

body.theme-p4 .p4-btn-3 { border-color: #ff8800; color: #cc6d00; }
body.theme-p4 .p4-btn-3:hover, body.theme-p4 .p4-btn-3.active-mod { background: #ff8800; color: #fff; }

body.theme-p4 .p4-btn-4 { border-color: #9d00ff; color: #7a00c7; }
body.theme-p4 .p4-btn-4:hover, body.theme-p4 .p4-btn-4.active-mod { background: #9d00ff; color: #fff; }

body.theme-p4 .p4-btn-5 { border-color: #00ccff; color: #008fb3; }
body.theme-p4 .p4-btn-5:hover, body.theme-p4 .p4-btn-5.active-mod { background: #00ccff; color: #fff; }

body.theme-p4 .p4-btn-6 { border-color: #e60012; color: #b3000e; }
body.theme-p4 .p4-btn-6:hover, body.theme-p4 .p4-btn-6.active-mod { background: #e60012; color: #fff; }

body.theme-p4 .data-card {
    background: #fff; border: 2px solid #000; box-shadow: 5px 5px 0px rgba(0,0,0,0.8);
    color: #000; border-radius: 0;
}
body.theme-p4 .data-title {
    color: #000 !important; background: #ffe600; padding: 5px;
    border: 2px solid #000; margin: -17px -17px 10px -17px;
    text-transform: uppercase; font-style: italic;
}
body.theme-p4 strong { color: #000; }
body.theme-p4 span { color: #333; }


/* ######################################################################
   TEMA: PERSONA 5 ROYAL (Red / Black / Punk / Comic)
   ###################################################################### */
body.theme-p5r {
    --bg-dark: #cc0000; 
    --kirijo-blue: #000; 
    --kirijo-dim: #333;
    --text-main: #fff;
    --text-dim: #000;
    
    background-color: #db0000;
    /* Patrón de estrellas/puntos estilo P5 */
    background-image: 
        linear-gradient(45deg, #000 25%, transparent 25%, transparent 75%, #000 75%, #000),
        linear-gradient(45deg, #000 25%, transparent 25%, transparent 75%, #000 75%, #000);
    background-size: 60px 60px;
    background-position: 0 0, 30px 30px;
}

body.theme-p5r .bg-grid { opacity: 0; } /* Ocultar grid base */

/* Header Punk */
body.theme-p5r .game-top-bar {
    background: #000; color: #fff;
    border-bottom: 5px solid #fff;
    transform: skewY(-2deg);
    margin-bottom: 25px;
    box-shadow: 0 10px 0 rgba(0,0,0,0.5);
}
body.theme-p5r .current-module-title {
    font-family: 'Impact', sans-serif;
    letter-spacing: 2px;
    color: var(--p5r-gold) !important;
    text-transform: uppercase;
    font-size: 1.5rem;
    transform: skewX(-10deg);
}
body.theme-p5r .btn-back { color: #fff; font-weight: 900; }

/* Botones "Ransom Note" (Recortados) */
body.theme-p5r .modules-nav {
    background: transparent; border: none; padding: 10px 20px;
}

/* Botón Normal (Inactivo) */
body.theme-p5r .modules-nav button {
    background: #000;           /* Fondo Negro */
    color: #fff;                /* Texto Blanco */
    border: 3px solid #fff;     /* Borde Blanco */
    transform: skew(-15deg);
    font-family: 'Impact', sans-serif; text-transform: uppercase;
    font-size: 1.1rem; margin-right: 5px; border-radius: 0;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Botón Hover (Al pasar el mouse) */
body.theme-p5r .modules-nav button:hover {
    background: #fff;           /* Fondo Blanco */
    color: #000;                /* Texto Negro */
    border-color: #000;
    transform: skew(-15deg) translateY(-5px) scale(1.1);
    box-shadow: 5px 5px 0 rgba(0,0,0,0.5);
}

/* CORRECCIÓN: Botón Activo (Seleccionado) */
body.theme-p5r .modules-nav button.active-mod {
    background: #000 !important;       /* Fondo Negro */
    color: var(--p5r-gold) !important; /* Texto Dorado */
    border-color: var(--p5r-gold) !important; /* Borde Dorado */
    box-shadow: 5px 5px 0 #fff;        /* Sombra Blanca dura */
    transform: skew(-15deg) translateY(-2px);
}

/* Data Cards Caóticas */
body.theme-p5r .data-card {
    background: #000; color: #fff;
    border: 3px solid #fff;
    transform: rotate(-1deg);
    box-shadow: 8px 8px 0 rgba(0,0,0,0.5);
    border-radius: 0;
    margin-bottom: 25px;
}
body.theme-p5r .data-card:nth-child(even) {
    transform: rotate(1deg); /* Rotación alterna */
}
body.theme-p5r .data-title {
    background: #fff; color: #000 !important;
    padding: 5px 15px;
    transform: skew(-10deg);
    display: inline-block;
    border: 2px solid #000;
    margin-bottom: 15px;
    font-weight: 900; font-family: 'Impact', sans-serif;
    box-shadow: 3px 3px 0 #888;
}

body.theme-p5r strong { color: var(--p5r-gold); }
body.theme-p5r span { color: #ccc; }

/* Social Links P5R */
body.theme-p5r .social-card .character-img {
    border: 4px solid #fff; border-radius: 0;
    transform: rotate(3deg); box-shadow: 5px 5px 0 #000;
}
body.theme-p5r .arcana-img {
    border: 2px solid #fff; border-radius: 0;
}

/* ESTILOS COMIC PARA CONFIDANTS P5R */
body.theme-p5r .ranks-container {
    padding: 10px;
    /* Fondo con patrón sutil de líneas diagonales si se desea, o simple */
}

/* Caja de Rango: Estilo "Recorte de Papel Negro" */
body.theme-p5r .social-rank-box {
    background: #000;
    border: 2px solid #fff;
    border-radius: 0;
    transform: rotate(-1deg);
    margin-bottom: 20px;
    box-shadow: 5px 5px 0 rgba(0,0,0,0.5);
    padding: 0; /* Quitamos padding para manejarlo dentro */
    /* overflow: hidden;  <-- ELIMINADO para evitar cortes en el título */
}
body.theme-p5r .social-rank-box:nth-child(even) { transform: rotate(1deg); }

/* Cabecera del Rango: Roja y angular */
body.theme-p5r .rank-header {
    background: var(--p5r-red);
    color: #fff;
    padding: 5px 10px;
    font-family: 'Impact', sans-serif;
    letter-spacing: 1px;
    border-bottom: 2px solid #fff;
    transform: skewX(-5deg); /* <-- ELIMINADO scale(1.05) para evitar cortes */
    margin: 0 0 10px 0;
}

body.theme-p5r .rank-date {
    font-family: var(--font-tech);
    font-size: 0.7em;
    background: #000;
    padding: 1px 5px;
    border: 1px solid #fff;
    margin-left: 10px;
    vertical-align: middle;
}

/* Respuestas: Estilo "Burbuja de Cómic Blanca" */
body.theme-p5r .response-item {
    background: #fff;
    color: #000;
    border: 2px solid #000;
    border-left: 2px solid #000; /* Reset del base */
    padding: 8px;
    margin: 5px 10px 10px 10px;
    transform: skew(-2deg);
    box-shadow: 3px 3px 0 #888;
}

body.theme-p5r .response-item .context {
    color: #444;
    font-weight: bold;
    border-bottom: 1px dashed #000;
    padding-bottom: 3px;
    margin-bottom: 3px;
}

body.theme-p5r .response-item .choice {
    color: #cc0000; /* Texto de respuesta en rojo oscuro */
    font-weight: 900;
    font-size: 1.1em;
}

/* Botón "Abrir Guía" P5R */
body.theme-p5r details summary {
    background: #000;
    color: var(--p5r-gold) !important; /* Dorado */
    border: 2px solid var(--p5r-gold);
    padding: 10px;
    margin-top: 20px;
    font-weight: 900;
    text-transform: uppercase;
    list-style: none;
    text-align: center;
    box-shadow: 0 0 10px var(--p5r-gold);
    transition: 0.2s;
    cursor: pointer;
}
body.theme-p5r details summary:hover {
    background: var(--p5r-gold);
    color: #000 !important;
    box-shadow: 0 0 20px var(--p5r-gold);
}   